<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}{{ app_name }}{% endblock %}</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='BusinessReporter_Favicon.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    {% block top_logo %}
    <div class="logo-wrap logo-top">
        <img src="{{ url_for('static', filename='BR_Logo-Square.svg') }}" 
             alt="Business Reporter" 
             onerror="this.style.display='none'">
    </div>
    {% endblock %}

    {% block content %}
    <!-- Page content goes here -->
    {% endblock %}

    {% block bottom_logo %}
    <div class="center-link">
        <img src="{{ url_for('static', filename='BusinessReporter_Logo_Horizontal_Dark.png') }}" 
             alt="Business Reporter" 
             class="brand-logo-img"
             id="brandLogo"
             style="max-width: 350px; margin-bottom: 15px;">
        
        <!-- Theme Toggle -->
        <div class="theme-toggle-container">
            <span class="theme-toggle-label" id="darkLabel">Dark theme</span>
            <label class="theme-switch">
                <input type="checkbox" id="themeToggle">
                <span class="theme-slider"></span>
            </label>
            <span class="theme-toggle-label" id="lightLabel">Light theme</span>
        </div>        
    </div>

    <script>
        // Theme toggle functionality
        const themeToggle = document.getElementById('themeToggle');
        const htmlElement = document.documentElement;
        const brandLogo = document.getElementById('brandLogo');
        const darkLabel = document.getElementById('darkLabel');
        const lightLabel = document.getElementById('lightLabel');
        
        // Check for saved theme preference or default to dark
        const currentTheme = localStorage.getItem('theme') || 'dark';
        
        // Apply saved theme on page load
        if (currentTheme === 'light') {
            htmlElement.setAttribute('data-theme', 'light');
            themeToggle.checked = true;
            brandLogo.src = "{{ url_for('static', filename='BusinessReporter_Logo_Horizontal_Light.png') }}";
            lightLabel.classList.add('active');
            darkLabel.classList.remove('active');
        } else {
            htmlElement.setAttribute('data-theme', 'dark');
            themeToggle.checked = false;
            brandLogo.src = "{{ url_for('static', filename='BusinessReporter_Logo_Horizontal_Dark.png') }}";
            darkLabel.classList.add('active');
            lightLabel.classList.remove('active');
        }
        
        // Toggle theme on switch change
        themeToggle.addEventListener('change', function() {
            if (this.checked) {
                htmlElement.setAttribute('data-theme', 'light');
                localStorage.setItem('theme', 'light');
                brandLogo.src = "{{ url_for('static', filename='BusinessReporter_Logo_Horizontal_Light.png') }}";
                lightLabel.classList.add('active');
                darkLabel.classList.remove('active');
            } else {
                htmlElement.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark');
                brandLogo.src = "{{ url_for('static', filename='BusinessReporter_Logo_Horizontal_Dark.png') }}";
                darkLabel.classList.add('active');
                lightLabel.classList.remove('active');
            }
        });
    </script>
    {% endblock %}

    {% block scripts %}
    <!-- Additional scripts go here -->
    {% endblock %}
</body>
</html>